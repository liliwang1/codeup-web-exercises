<!DOCTYPE html>
<html>
<head>
    <title>Online Store</title>
</head>
<body>
<h1>My Tool Store</h1>
<table id="products">
    <thead>
        <tr>
            <th>Title</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Categories</th>
        </tr>
    </thead>
    <tbody id="insertProducts"></tbody>
</table>
<button id="btn" type="button">refresh</button>
<button id="btn-clear" type="button">clear</button>

<script src="js/jquery-3.5.1.js"></script>
<script>
(function() {
    "use strict";
    $().ready(function () {
        // TODO: Create an AJAX GET request for the file under data/inventory.json
        $.ajax("data/inventory.json")
            .done(onSuccess)
            .fail(function(jqXhr, status, error) {
            alert("There was an error! Check the console for details");
            console.log("Response status: " + status);
            console.log("Error object: " + error);
        });

        // TODO: Take the data from inventory.json and append it to the products table
        function onSuccess(data, status, jqXhr) {
            console.log("Everything went great! Check out the server's response in the console.");
            console.log(data);
            let html = '';
            for (let dataItem of data) {
                html += `<tr>
                            <th>${dataItem["title"]}</th>
                            <th>${dataItem["quantity"]}</th>
                            <th>$${dataItem["price"]}</th>
                            <th>${dataItem["categories"]}</th>
                        </tr>`;
                console.log(dataItem);
                console.log(dataItem.categories);
                console.log(dataItem["categories"]);
            }
            $('#insertProducts').html(html);
        }

        $('#btn').click(function () {
            $.ajax("data/inventory.json")
                .done(onSuccess);
        });

        $('#btn-clear').click(function () {
            $('#insertProducts').empty();
        })
    })

    //       HINT: Your data should come back as a JSON object; use console.log() to inspect its contents and fields
    //       HINT: You will want to target #insertProducts for your new HTML elements
})();
</script>

</body>
</html>
